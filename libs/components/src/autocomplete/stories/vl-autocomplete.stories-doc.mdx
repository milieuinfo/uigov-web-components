import { ArgTypes, Canvas, Source } from '@storybook/blocks';
import * as VlAutocompleteStories from './vl-autocomplete.stories';
import autocompleteApiImplementation from './vl-autocomplete-api.stories-util?raw';
import autocompleteMockedApiImplementation from './vl-autocomplete-mocked-api.stories-util?raw';

# Autocomplete

Gebruik de `autocomplete` component om een lijst met suggesties weer te geven, gefilterd op de ingevoerde tekst. De
lijst kan een statische lijst zijn (`data-vl-static-list`) of kan worden opgehaald uit een api (dataFetcher).


## Voorbeeld

```js
import { VlAutocomplete } from '@domg-wc/components';
```

```html
<vl-autocomplete></vl-autocomplete>
```

<Canvas of={VlAutocompleteStories.AutocompleteDefault} />


## Configuratie

<ArgTypes of={VlAutocompleteStories.AutocompleteDefault} />


## Varianten

### Suggesties groeperen per subtitle

<Canvas of={VlAutocompleteStories.AutocompleteGroupBySubtitle} />

### Voorbeeld met location API

Om te werken met een API, luister je naar het `search`-event dat opgeworpen wordt wanneer de gebruiker begint te typen.
Dan kan je op basis daarvan de `.matches` instellen van de `autocomplete`-component om de suggesties te tonen.

Zie het onderstaande code voorbeeld.

<Canvas of={VlAutocompleteStories.AutocompleteInputAndApiCall} />

<details>
    <summary>code voorbeeld met location API</summary>
    <Source code={autocompleteApiImplementation} language="ts" dark={true} />
</details>

[Documentatie voor de Geolocation API](https://geo.api.vlaanderen.be/geolocation/)

### Voorbeeld met mocked API call

Type "Drab" om een van de mocked resultaten te zien.
Je kan deze manier van werken gebruiken indien de suggesties een onveranderlijke lijst zijn.

Gelijkaardig aan bovenstaand voorbeeld, kan je `.matches` instellen om de suggesties voor een gebruiker in te stellen
op basis van de input.

Zie het onderstaande code voorbeeld.

<Canvas of={VlAutocompleteStories.AutocompleteInputAndMockedApiCall} />

<details>
    <summary>code voorbeeld voor mocked API</summary>
    <Source code={autocompleteMockedApiImplementation} language="ts" dark={true} />
</details>

### Zonder suggesties voor autocomplete

Indien je `autocomplete` wil gebruiken zonder suggesties kan je de `.items`-array weglaten.
In dat geval zal echter bij de input de loading indicator blijven staan aangezien die verwacht dat er een lijst van
suggesties komt.

Je kan hiervoor ofwel:
- altijd de loading indicator afzetten door het `disable-loading` attribuut in te stellen
- de `.matches` property van de component gelijkstellen aan een lege array (`[]`), op dezelfde manier als waarop de
  resultaten van een API call worden ingeladen - zodoende wordt de loading indicator niet langer getoond

<Canvas of={VlAutocompleteStories.AutocompleteWithoutSuggestions} />

### Voorbeeld in een side-sheet

<Canvas of={VlAutocompleteStories.AutocompleteInSideSheet} />


## Referenties

### Digitaal Vlaanderen

[Documentatie Digitaal Vlaanderen - Autocomplete](https://overheid.vlaanderen.be/webuniversum/v3/documentation/js-components/vl-ui-autocomplete)
[Documentatie voor de Geolocation API](https://geo.api.vlaanderen.be/geolocation/)

### Legacy Documentatie

[Legacy Storybook - Autocomplete](https://webcomponenten.omgeving.vlaanderen.be/storybook/?path=/docs/custom-elements-vl-autocomplete--default)
