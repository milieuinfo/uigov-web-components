import { ArgTypes, Canvas, Source } from '@storybook/blocks';
import * as VlFormStories from './vl-form.stories';

# Form Validatie

<Alert title="Deprecated">
In v2.0.0 verdwijnt deze component. Meer info over validatie binnen onze form componenten vind je hier: [Form - Validatie](/docs/ontwerp-form-validation--documentatie)
</Alert>

Een `<form is="vl-form">` met formuliervalidatie zorgt ervoor dat gebruikersinvoer in formulieren gevalideerd wordt.


## Voorbeeld

```js
import { VlFormValidation, VlFormElement } from '@domg-wc/elements';
```

```html
<form is="vl-form"></form>
```

<Canvas of={VlFormStories.FormDefault} />


## Configuratie

<ArgTypes of={VlFormStories.FormDefault} />


## Info

> `vl-form-validation` element gebruikt achterliggend `validate.js` 0.12 ([http://validatejs.org/](http://validatejs.org/)).

Het attribuut `[data-validate-form]` is vereist voor het formulierelement.

<Canvas of={VlFormStories.FormValidationDefault} />

### Native validation

Standaard zal de HTML5-validatie van de browser gedeactiveerd worden en word `novalidate` attribuut toegevoegd.
[Zie hier voor meer info op MDN.](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form#novalidate)

Als je toch native HTML validation wil toelaten, moet je het attribuut `data-vl-native-validation` toevoegen.

### Reset

Als je een formulier opnieuw instelt, worden validatiefouten automatisch gereset. Als je de validaties uitdrukkelijk
opnieuw wilt instellen (bijvoorbeeld na het verzenden aan de clientzijde), kan je `vl.formValidation.reset(formEl)`
aanroepen

### Reset individueel form element

Om een form element manueel te resetten, kan je tevens ook `resetValidity()` aanroepen op form elementen die overerven
van `vlFormValidationElement`; `vl-datepicker`, `vl-textarea`, `vl-upload`, `vl-input-field` en `vl-select`.

### Required

Om de `form-validation` te laten werken voor een control moet je uitdrukkelijk `data-vl-required` op het te valideren
element zetten. Anders wordt het element als een optioneel invoerveld gezien.

Je vindt een voorbeeld hieronder; naam is verplicht en voornaam is niet verplicht.

<Canvas of={VlFormStories.FormValidationOptional} />

### Escape naam attributen

Indien er een `.` in het naam attribuut van een input veld staat en de validatie niet correct werkt moet dit naam
attribuut ge-escaped worden.<br/>
Zet hiervoor het attribuut `data-vl-escape-field-names` op true op het form element.

<Canvas of={VlFormStories.FormValidationDefault} />

### Group

Met `vl-form-group` wordt styling toegevoegd om makkelijker te onderscheiden tussen verschillende form controls.

Zie voorbeeld hieronder:

<Canvas of={VlFormStories.FormGroupDefault} />

### Valideren zonder submit

Voor validatie in de context van een single page application, willen we typisch ook geen submit uitvoeren maar enkel
de inputs van de form valideren. Om dit te doen kan je de functie `requestValidation()` aanroepen op de
`vl-form`-instantie.

Dit zal de achterliggende `validate.js`-validatie uitvoeren zonder de form te submitten.

Hieronder zie je een voorbeeld hoe je dit zou kunnen gebruiken:

<details>
<summary>voorbeeld code</summary>
<Source
    language="js"
    format={true}
    dark
    code={`
    // form instantie ophalen
    const vlForm = document.querySelector('form[is="vl-form"]#eerste-form');
    // valideren zonder submit
    vlForm.requestValidation();
    // native "checkValidity()" methode geeft validiteit de form terug
    console.log('vlForm.checkValidity', vlForm.checkValidity());`}
></Source>
</details>


## Referenties

### Digitaal Vlaanderen

[Documentatie Digitaal Vlaanderen - Form Validation](https://overheid.vlaanderen.be/webuniversum/v3/documentation/forms/vl-ui-form-validation)

### Legacy Documentatie

[Legacy Storybook - Form Validation](https://webcomponenten.omgeving.vlaanderen.be/storybook/?path=/docs/native-elements-vl-form--with-validation)

[Legacy Documentatie - Form Validation](https://webcomponenten.omgeving.vlaanderen.be/doc/VlForm.html)

[Legacy Demo - Form Validation](https://webcomponenten.omgeving.vlaanderen.be/demo/vl-form.html)
